<div style="padding: 1%;">
  <div class="tab-pane fade show active">
    <div class="card">

      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" id="Year-tab" data-toggle="tab" href="#Year" role="tab" aria-controls="Year"
            aria-selected="true">รายงานสรุปการลาประจำปี {{myYear}}</a>
        </li>
        <!-- <li class="nav-item">
          <a class="nav-link" id="Month-tab" data-toggle="tab" href="#Month" role="tab" aria-controls="Month"
            aria-selected="false">รายงานสรุปการลาประจำเดือน </a>
        </li> -->
        <li class="nav-item">
          <a class="nav-link" id="Day-tab" data-toggle="tab" href="#Day" role="tab" aria-controls="Day"
            aria-selected="false">รายงานสรุปการลาประจำวัน </a>
        </li>
      </ul>

      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="Year" role="tabpanel" aria-labelledby="Year-tab">
          <div style="padding-left: 5%;padding-right: 5%;">

            <h6 class="m-0 font-weight-bold text-primary">เลือกบุคลากร</h6>


            <select id="inputState" class="form-control form-control-lg" (change)="sumleave_show($event.target.value)">
              <option *ngFor="let item of Employee; let i = index" value="{{item.Emp_ID}}">{{item.Prefix}}
                {{item.EmpName}} {{item.EmpLastName}}</option>
            </select>
            <h6 class="m-0 font-weight-bold text-primary">สถิติการลา</h6><br>

            <div class="container">
              <div class="row">
                <div class="col">
                  <div *ngFor="let item of sumleave; let i = index">
                    <h4 class="small font-weight-bold">{{item.LTypeName}} <span class="float-right">{{item.sum_total}}
                        วัน</span></h4>
                    <div class="progress mb-4">
                      <div class="progress-bar bg-danger" role="progressbar" [style.width.em]="item.sum_total"
                        aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <!-- <div class="card border-primary mb-3" style="max-width: 25rem;height: auto">
                    <div class="card-body">
                      <canvas id="myChart" width="500" height="300"></canvas>
                    </div>
                  </div> -->
                  <canvas id="myChart" width="500" height="300"></canvas>

                </div>
              </div>

            </div>






            <!-- <h4 class="small font-weight-bold">Sales done <span class="float-right">40%</span></h4>
            <div class="progress mb-4">
              <div class="progress-bar bg-warning" role="progressbar" style="width: 40%" aria-valuenow="40"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <h4 class="small font-weight-bold">Customer Database <span class="float-right">60%</span></h4>
            <div class="progress mb-4">
              <div class="progress-bar" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0"
                aria-valuemax="100"></div>
            </div>
            <h4 class="small font-weight-bold">Affiliate payouts <span class="float-right">80%</span></h4>
            <div class="progress mb-4">
              <div class="progress-bar bg-info" role="progressbar" style="width: 80%" aria-valuenow="80"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <h4 class="small font-weight-bold">Account Setup <span class="float-right">Complete!</span></h4>
            <div class="progress">
              <div class="progress-bar bg-success" role="progressbar" style="width: 100%" aria-valuenow="100"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div> -->
          </div>

          <!-- <div class="table-responsive-xl">
            <table class="table table-hover">
              <thead class="text-success">
                <tr>
                  <th scope="col">ชื่อ-นามสกุล</th>
                  <th scope="col">ม.ค.</th>
                  <th scope="col">ก.พ.</th>
                  <th scope="col">มี.ค.</th>
                  <th scope="col">เม.ย.</th>
                  <th scope="col">พ.ค.</th>
                  <th scope="col">มิ.ย.</th>
                  <th scope="col">ก.ค.</th>
                  <th scope="col">ส.ค.</th>
                  <th scope="col">ก.ย.</th>
                  <th scope="col">ต.ค.</th>
                  <th scope="col">พ.ย.</th>
                  <th scope="col">ธ.ค.</th>
                  <th scope="col">รวม</th>
                </tr>
              </thead>
              <tbody *ngFor="let item of sumleave; let i = index">
                <tr>
                  <td>{{item.EmpName}} {{item.EmpLastName}}</td>
                  <td>{{item.Jan}} </td>
                  <td>{{item.Feb}} </td>
                  <td>{{item.Mar}} </td>
                  <td>{{item.Apr}} </td>
                  <td>{{item.May}} </td>
                  <td>{{item.Jun}} </td>
                  <td>{{item.Jul}} </td>
                  <td>{{item.Aug}} </td>
                  <td>{{item.Sep}} </td>
                  <td>{{item.Oct}} </td>
                  <td>{{item.Nov}} </td>
                  <td>{{item.Dec}} </td>
                  <td>{{item.Total}} </td>
                </tr>

              </tbody>
            </table>
          </div> -->
        </div>
        <div class="tab-pane fade" id="Month" role="tabpanel" aria-labelledby="Month-tab">






        </div>




        <div class="tab-pane fade" id="Day" role="tabpanel" aria-labelledby="Day-tab">


          <div class="container">
            <div class="row">
              <!-- <div class="col-sm">
                    เดือน วัน ปี
                    <input type="date" class="form-control" placeholder="Search" #Day_leave>
                    <button type="button" class="btn btn-success"
                      (click)="getsearchdayleave(Day_leave.value)">ค้นหา</button>
                  </div> -->
              <div class="container">
                <div class="row">
                  <div class="col-sm">
                    <br>
                    <p>ตั้งแต่วันที่</p>
                    <input class="form-control mr-sm-2" type="date" placeholder="Search" aria-label="Search"
                      #Day_leave_start>

                  </div>
                  <div class="col-sm">
                    <br>
                    <p>ถึงวันที่</p>
                    <input class="form-control mr-sm-2" type="date" placeholder="Search" aria-label="Search"
                      #Day_leave_last>
                  </div>
                  <div class="col-sm">
                    <br>
                    <br>
                    <br>
                    <button class="btn btn-success my-2 my-sm-0"
                      (click)="getsearchdayleave(Day_leave_start.value,Day_leave_last.value)">ค้นหา</button>
                  </div>
                </div>
              </div>

            </div>
          </div>
          <div class="table-responsive-xl">


            <table class="table table-borderless">
              <thead>
                <tr>
                  <th scope="col" class="text-center">ลำดับ</th>
                  <th scope="col" class="text-center">ชื่อ-นามสกุล</th>
                  <th scope="col" class="text-center">สถานะ</th>
                  <th scope="col" class="text-center">จำนวนวันลา</th>
                  <th scope="col" class="text-center">วันลา</th>
                  <th scope="col" class="text-center">ถึงวัน</th>
                  <th scope="col" class="text-center">สถานะใบลา</th>
                  <th scope="col" class="text-center">จัดการ</th>


                </tr>
              </thead>
              <tbody *ngFor="let item of searchdayleave; let i = index">
                <tr>
                  <td class="text-center">
                    <p ng-repeat="i in range(1, 5)">
                      {{ i+1 }}
                    </p>
                  </td>

                  <td> {{item.EmpName}} {{item.EmpLastName}} </td>
                  <td class="text-center"> {{item.Name_Leave}} </td>
                  <td class="text-center"> {{item.LeaveTotal}} <p *ngIf="item.LeaveTotal == 0" style="color: red;">
                      ขออนุญาตยกเลิก</p>
                  </td>
                  <td class="text-center"> {{item.LeaveDateStart}} </td>
                  <td class="text-center"> {{item.LeaveDateLast}} </td>
                  <td class="text-center">
                    <p style="color: blue;" *ngIf="item.LeaveStatus_Document=='ส่งใบลาฉบับจริงแล้ว'">
                      {{item.LeaveStatus_Document}}</p>
                    <p style="color: red;" *ngIf="item.LeaveStatus_Document=='ยังไม่ส่งใบลาฉบับจริง'">
                      {{item.LeaveStatus_Document}}</p>
                  </td>

                  <td class="text-center">
                    <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#exampleModal"
                      (click)="show_data(item.Leave_ID,item.Name_Leave,item.To_Person,item.Emp_ID,
                                                  item.EmpName,item.EmpLastName,item.PositionName,item.DeptName,item.SectorName,item.LTypeName,
                                                  item.LeaveData,item.ContactInformation,item.employee,item.LeaveDateStart,item.LeaveDateLast,item.LeaveTotal,
                                                item.LeaveStatus_Name, item.LeaveStatus_Document,item.Leave_characteristics_dateStart,item.Leave_characteristics_dateLast,item.file_names)"><i
                        class="fa fa-cog" aria-hidden="true"></i></button>
                  </td>
                </tr>

              </tbody>
            </table>
          </div>
        </div>


      </div>

    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">ข้อมูลการลา</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="card-header text-left">
            <b style="color: mediumblue;"> ยื่นการลา</b>
          </div>
          <br>
          <div class="container">
            <h6>เรื่อง : {{Name_Leave_show}}</h6>
            <br>
            <h6>เรียน : {{To_Person_show}}</h6>
          </div>
          &nbsp;&nbsp;
          <div class="card-header text-left">
            <b style="color: mediumblue;">ข้อมุลบุคลากร</b>
          </div>
          &nbsp;
          <div class="container">
            <div class="row">
              <div class="col-sm">
                <h6>รหัส </h6>
                <input type="text" class="EmpName_show" value="{{Emp_ID_show}}" readonly>

              </div>
              <div class="col-sm">
                <h6> ชื่อ </h6>
                <input type="text" class="EmpName_show" #EmpName value="{{EmpName_show}}" readonly>
              </div>
              <div class="col-sm">
                <h6> นามสกุล </h6>
                <input type="text" class="EmpLastName__show" #EmpLastName value="{{EmpLastName_show}}" readonly>

              </div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-sm">
                <input type="text" class="Leave_ID_show" style="display: none;" #Leave_ID value="{{Leave_ID_show}}"
                  readonly>
                <h6>ตำแหน่ง </h6>
                <input type="text" class="EmpName_show" value="{{PositionName_show}}" readonly>

              </div>
              <div class="col-sm">
                <h6>แผนก </h6>
                <input type="text" class="EmpName_show" value="{{DeptName_show}}" readonly>

              </div>
              <div class="col-sm">
                <h6> ฝ่าย </h6>
                <input type="text" class="EmpName_show" value="{{SectorName_show}}" readonly>

              </div>
            </div>
          </div>
          <div class="card-header text-left">
            <b style="color: mediumblue;"> ข้อมูลการลา</b>
          </div>
          <br>
          <div class="container">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th scope="col">หัวข้อ</th>
                  <th scope="col">รายละเอียด</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">ประเภทการลา :</th>
                  <td>
                    <input type="text" class="form-control" style="display: none;" value="{{LTypeName_show}}" #LTypeName
                      readonly>
                    {{LTypeName_show}}
                  </td>
                </tr>

                <tr>
                  <th scope="row">มีผู้รับผิดชอบงานแทน :</th>
                  <td>{{employee_show}}</td>
                </tr>


                <tr>
                  <th scope="row">ขอลาเนื่องจาก :</th>
                  <td> {{LeaveData_show}}</td>

                </tr>
                <tr>
                  <th scope="row">ข้อมูลการติดต่อ :</th>
                  <td> {{ContactInformation_show}}</td>

                </tr>
                <tr>
                  <th scope="row">วันที่ลา :</th>
                  <td> {{LeaveDateStart_show}} / {{Leave_characteristics_dateStart_show}}</td>

                </tr>
                <tr>
                  <th scope="row">ถึงวันที่ :</th>
                  <td> {{LeaveDateLast_show}} / {{Leave_characteristics_dateLast_show}} </td>

                </tr>
                <tr>
                  <th scope="row">จำนวนวันลา :</th>
                  <td> {{LeaveTotal_show}} <p *ngIf="LeaveTotal_show == 0" style="color: red;">
                      ขออนุญาตยกเลิก</p>
                  </td>

                </tr>
                <tr>
                  <th scope="row">แนปไฟล์ :</th>
                  <td><a
                      href="http://cpe.rmuti.ac.th/project/Leave_system/upload/{{file_names_show}}">{{file_names_show}}</a>
                  </td>

                </tr>
                <tr>
                  <th scope="row">สถานะการลา :</th>
                  <td style="color: rgb(12, 48, 206);"> {{LeaveStatus_Name_show}}</td>
                </tr>
                <tr>
                  <th scope="row">สถานะการส่งใบลาฉบับจริง :</th>

                  <td>
                    <!-- <input class="leave" type="text" value="{{Leave_ID_show}}"> -->
                    <select class="form-control" title="สำหรับผู้ดูแลระบบเท่านั้น" #LeaveStatus_Document
                      [disabled]="btnDisable_Doc" value="{{LeaveStatus_Document_show}}">
                      <option value="ส่งใบลาฉบับจริงแล้ว">ส่งใบลาฉบับจริงแล้ว</option>
                      <option value="ยังไม่ส่งใบลาฉบับจริง">ยังไม่ส่งใบลาฉบับจริง</option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal"
          (click)="delete_leave(Leave_ID.value,EmpName.value,EmpLastName.value,LTypeName.value)"
          *ngIf="btn_delete">ลบ</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal"
          (click)="updateleave_status(LeaveStatus_Document.value)">บันทึก</button>
      </div>
    </div>
  </div>
</div>